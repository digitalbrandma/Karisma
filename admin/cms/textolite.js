/* Textolite v1.03 */ (function(){var a=function(n,v,e,p){var s=encodeURIComponent(n)+'='+encodeURIComponent(v);if(e){var d=new Date();d.setTime(d.getTime()+(1000*60*e));s+=';expires='+d.toUTCString();};if(p){s+=';path='+p;}document.cookie=s;};var b=function(n,p){a(n,1,-1,p);};var c=function(n){var m=document.cookie.match('(^|;) ?'+n+' ?= ?([^;]*)(;|$)');if(m){return m[2]}};var d=function(e,s,d,r,f,a,c){var p;var t=new Date();var i=setInterval(function(){p=(new Date()-t)/r;if(p<1){a.call(e,(d-s)*f(p)+s);}else{a.call(e,d);var l=e.animationTimer.length;if(l>1){while(l--){if(e.animationTimer[l]==i){delete e.animationTimer[l];}}}else delete e.animationTimer;clearInterval(i);if(c){c.call(e);}}},10);if(!e.animationTimer){e.animationTimer=[i];}else e.animationTimer[e.animationTimer.length]=i;};var e=function(e,c){if(window.getComputedStyle(e)['display']=='none'){e.style.opacity='0';e.style.display='block';d(e,0,1,400,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.opacity=p.toFixed(1);},function(){e.style.opacity='';if(c){c.call(e);}});}};var f=function(e,c){if(e.style.overflow!='hidden'&&window.getComputedStyle(e)['display']!='none'){d(e,1,0,300,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.opacity=p.toFixed(1);},function(){e.style.display='none';e.style.opacity='';if(c){c.call(e);}});}};var g=function(e,c){if(window.getComputedStyle(e)['display']=='none'){e.style.opacity='0';e.style.position='absolute';e.style.display='block';var h=e.clientHeight;var t=parseInt(window.getComputedStyle(e)['paddingTop']);e.style.height='0';e.style.position='';e.style.overflow='hidden';e.style.marginLeft='-'+window.getComputedStyle(e.firstElementChild)['paddingLeft'];if(t){h=h-t;d(e,0,t,200,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.paddingTop=p.toFixed(0)+'px';});}d(e,0,h,200,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.height=p.toFixed(0)+'px';});d(e,parseInt(e.style.marginLeft),0,400,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.marginLeft=p.toFixed(0)+'px';});d(e,0,1,600,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.opacity=p.toFixed(1);},function(){e.style.height='';e.style.marginLeft='';e.style.paddingTop='';e.style.opacity='';e.style.overflow='';if(c){c.call(e);}});}};var h=function(e,c){if(e.style.overflow!='hidden'&&window.getComputedStyle(e)['display']!='none'){var h=e.clientHeight;var t=parseInt(window.getComputedStyle(e)['paddingTop']);e.style.overflow='hidden';if(t){h=h-t;d(e,t,0,400,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.paddingTop=p.toFixed(0)+'px';});}d(e,e.clientHeight,0,420,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.height=p.toFixed(0)+'px';},function(){e.style.display='none';e.style.opacity='';e.style.marginLeft='';e.style.height='';e.style.overflow='';if(c){c.call(e);}});d(e,0,parseInt('-'+window.getComputedStyle(e.firstElementChild)['paddingLeft']),400,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.marginLeft=p.toFixed(0)+'px';});d(e,1,0,200,function(p){return((-Math.cos(p*Math.PI)/2)+0.5);},function(p){e.style.opacity=p.toFixed(1);});}};var i=function(s){var aa=function(n,s){return(n<<s)|(n>>>(32-s));};var bb=function(v){var i,r,s="";for(i=7;i>=0;i--){r=(v>>>(i*4))&0x0f;s+=r.toString(16);}return s;};var cc=function(d){var i,f,r="";f=String.fromCharCode;d=d.replace(/\r\n/g,"\n");for(i=0;i<d.length;i++){var c=d.charCodeAt(i);if(c<128){r+=f(c);}else if((c>127)&&(c<2048)){r+=f((c>>6)|192);r+=f((c&63)|128);}else{r+=f((c>>12)|224);r+=f(((c>>6)&63)|128);r+=f((c&63)|128);}}return r;};var a,b,i,j,l,t,A,B,C,D,E,W,H0=0x67452301,H1=0xEFCDAB89,H2=0x98BADCFE,H3=0x10325476,H4=0xC3D2E1F0;s=cc(s);l=s.length;a=new Array();W=new Array(80);for(i=0;i<l-3;i+=4){j=s.charCodeAt(i)<<24|s.charCodeAt(i+1)<<16|s.charCodeAt(i+2)<<8|s.charCodeAt(i+3);a.push(j);}switch(l%4){case 0:i=0x080000000;break;case 1:i=s.charCodeAt(l-1)<<24|0x0800000;break;case 2:i=s.charCodeAt(l-2)<<24|s.charCodeAt(l-1)<<16|0x08000;break;case 3:i=s.charCodeAt(l-3)<<24|s.charCodeAt(l-2)<<16|s.charCodeAt(l-1)<<8|0x80;break;}a.push(i);while((a.length%16)!=14)a.push(0);a.push(l>>>29);a.push((l<<3)&0x0ffffffff);for(b=0;b<a.length;b+=16){for(i=0;i<16;i++){W[i]=a[b+i];}for(i=16;i<=79;i++){W[i]=aa(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);}A=H0;B=H1;C=H2;D=H3;E=H4;for(i=0;i<=19;i++){t=(aa(A,5)+((B&C)|(~B&D))+E+W[i]+0x5A827999)&0x0ffffffff;E=D;D=C;C=aa(B,30);B=A;A=t;}for(i=20;i<=39;i++){t=(aa(A,5)+(B^C^D)+E+W[i]+0x6ED9EBA1)&0x0ffffffff;E=D;D=C;C=aa(B,30);B=A;A=t;}for(i=40;i<=59;i++){t=(aa(A,5)+((B&C)|(B&D)|(C&D))+E+W[i]+0x8F1BBCDC)&0x0ffffffff;E=D;D=C;C=aa(B,30);B=A;A=t;}for(i=60;i<=79;i++){t=(aa(A,5)+(B^C^D)+E+W[i]+0xCA62C1D6)&0x0ffffffff;E=D;D=C;C=aa(B,30);B=A;A=t;}H0=(H0+A)&0x0ffffffff;H1=(H1+B)&0x0ffffffff;H2=(H2+C)&0x0ffffffff;H3=(H3+D)&0x0ffffffff;H4=(H4+E)&0x0ffffffff;}return(bb(H0)+bb(H1)+bb(H2)+bb(H3)+bb(H4)).toLowerCase();};var j=function(q,s,e,n,p,d){var h=new XMLHttpRequest();if(d){h.open('POST',d,true);h.withCredentials=true;}else{h.open('POST',location.href,true);h.setRequestHeader('AJAX',1);}h.onreadystatechange=function(){if(h.readyState==4){if(h.status==200){clearTimeout(t);s.call(h,h.responseText);}else if(h.status==404){clearTimeout(t);e.call(h,h.responseText);}}};if(q.charAt){var t=setTimeout(function(){h.onreadystatechange=function(){};n.call(h);},5000);h.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}else{var i=function(){return setTimeout(function(){h.onreadystatechange=function(){};h.upload.onprogress=function(){};n.call(h);},5000);};var t=i();var l=0;h.upload.onprogress=function(event){if(event.loaded>l){l=event.loaded;clearTimeout(t);p.call(h,l,event.total);}else t=i();};p.call(h,0,0);}h.send(q);};var k=function(){return i(new Date().getTime()+''+Math.floor(Math.random()*2147483648));};document.addEventListener('DOMContentLoaded',function(){var l=document.getElementById('textolite-login');if(l){var m=l.querySelector('input[type="button"]');var n=l.querySelector('input[type="password"]');var o=n.nextElementSibling;var p=l.querySelector('p samp');var r=l.querySelector('ol');var s=r.removeChild(r.firstElementChild);var t=r.getAttribute('data-error-limit');var u=r.getAttribute('data-error-count');var v=function(){if(this.className){n.type='password';this.className='';this.title=this.getAttribute('data-show-password');}else{n.type='text';this.className='textolite-hidden';this.title=this.getAttribute('data-hide-password');}};var w=function(event){if(event.keyCode==13){n.removeEventListener('input',x);y();}};var x=function(){if(n.value.length>0){m.disabled=false;}else m.disabled=true;};var y=function(){if(!m.disabled){n.focus();n.disabled=true;m.disabled=true;p.innerHTML=p.getAttribute('data-hash-сreating');p.className='textolite-processing';e(p);z(n.value,n.getAttribute('data-hash-depth'),200,aa);}};var z=function(bb,cc,dd,ee){var ff=0;var ii=i(i(bb).substring(0,22)+bb);var hh=setInterval(function(){for(var gg=ff+dd;ff<gg;ff++){if(ff<cc){ii=i(ii);}else{ee(ii);clearInterval(hh);break;}}},0);};var aa=function(bb){p.innerHTML=p.getAttribute('data-сhecking-password');j('password='+bb,function(){a('textolite_check',1);p.innerHTML=p.getAttribute('data-access-granted');p.className='textolite-success';location.reload(true);},function(){n.disabled=false;n.focus();n.addEventListener('input',x);p.innerHTML=p.getAttribute('data-access-denied');p.className='textolite-error';u=u*1+1;r.setAttribute('data-error-count',u);if(u>=t){location.reload(true);}else r.appendChild(r.firstElementChild).className='textolite-mark';},function(){n.disabled=false;n.focus();n.addEventListener('input',x);p.innerHTML=p.getAttribute('data-no-response');p.className='textolite-error';});};for(var cc=0;cc<t;cc++){var dd=s.cloneNode(true);if(cc>=(t-u)){dd.className='textolite-mark';}r.appendChild(dd);}r.style.display='block';n.focus();o.title=o.getAttribute('data-show-password');o.addEventListener('mousedown',v);m.addEventListener('click',y);n.addEventListener('input',x);n.addEventListener('keydown',w);}});document.addEventListener('DOMContentLoaded',function(){var l=document.getElementById('textolite-panel');if(l){var m=l.querySelector('div>div+ol li:first-child');var n=l.querySelector('div>div+ol li:last-child');var o=l.querySelector('div>div+ol+ul+ul li:first-child input');var p=l.querySelector('div>div+ol+ul+ul li:last-child input');var r=l.querySelector('div>div+ol+ul+ul+p samp');var s=l.querySelectorAll('div>div+ol+ul>li>a');var t=function(){var aa=function(jj){var ii=[];var kk=jj.childNodes;for(var ll=0,mm=kk.length;ll<mm;ll++){if(kk[ll].nodeType==3&&kk[ll].textContent.match(/\S/)){ii[ii.length]=kk[ll];}else if(kk[ll].nodeType==1&&kk[ll].id.indexOf('textolite')==-1){var nn=kk[ll].tagName.toLowerCase();if(nn!='script'&&nn!='style'&&nn!='title'){Array.prototype.push.apply(ii,aa(kk[ll]));}}}return ii;};var bb=function(kk){var ii=kk.nextElementSibling;var jj=kk.innerHTML;if(jj.match(new RegExp('[<>]','gi'))){kk.innerHTML=jj.replace(new RegExp('<.*?>','gi'),'');};if(ii&&kk.className==ii.className){bb(ii);kk.innerHTML+=ii.innerHTML;kk.parentNode.removeChild(ii);}};var cc=function(ii){for(var jj=ii.parentNode;jj;jj=jj.parentNode){if(window.getComputedStyle(jj)['display']=='block'){return jj;}}};var dd=function(ii){if((' '+ii.className+' ').indexOf(' textolite-focus ')==-1){ii.className+=' textolite-focus';}};var ee=function(ii){if((' '+ii.className+' ').indexOf(' textolite-focus ')!=-1){ii.className=((' '+ii.className+' ').replace(' textolite-focus ',' ')).slice(1,-1);}};var ff=function(){var ii=function(){var kk=[];var ll=document.querySelectorAll('[data-original-content]');for(var mm=0,nn=ll.length;mm<nn;mm++){if(ll[mm].getAttribute('data-original-content')!=ll[mm].innerHTML){kk[kk.length]=ll[mm];}}return kk;};var jj=function(kk){var ll=0;var mm=document.querySelectorAll('.textolite-block');for(var nn=0,oo=mm.length;nn<oo;nn++){var pp=mm[nn];var rr=pp.innerHTML;var ss=pp.getAttribute('data-original-content');if(ss==kk||(rr==kk&&!ss)){if(ss&&ss!=rr){return ll;}else ll++;}}};var zz=ii();var yy=document.getElementById('textolite-source');var xx=yy.innerHTML;if(zz.length){for(var ww=0,length=zz.length;ww<length;ww++){var vv=zz[ww];var uu=vv.innerHTML;var tt=vv.getAttribute('data-original-content');var ss=xx.split('>'+tt+'<').length-1;if(ss){if(ss.length==1){xx=xx.replace('>'+tt+'<','>'+uu+'<');vv.setAttribute('data-original-content',uu);}else{var rr=0,pp;var oo=jj(tt);xx=xx.replace(new RegExp('>'+tt.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&')+'<','g'),function(ab){if(rr==oo){pp='>'+uu+'<';vv.setAttribute('data-original-content',uu);}else pp=ab;rr++;return pp;});}}}yy.innerHTML=xx;}return xx;};var gg=function(event){if(this!=document.activeElement){document.activeElement.blur();this.focus();}event.preventDefault();};var hh=function(){var kk=this;var ll=function(event){if(event.keyCode==13){event.preventDefault();kk.blur();}};var mm=function(){if(o.disabled||kk.firstEdit){if(kk.getAttribute('data-original-content')!==kk.innerHTML){if(r.innerHTML==r.getAttribute('data-saved')){f(r);};o.disabled=false;}else o.disabled=true;if(document.activeElement==kk){kk.firstEdit=true;}else delete kk.firstEdit;}bb(kk);};var nn=function(){mm();document.removeEventListener('mousemove',nn);setTimeout(function(){if(document.activeElement==kk){document.addEventListener('mousemove',nn);}},500);};var oo=function(){mm();document.removeEventListener('keydown',ll);document.removeEventListener('keyup',mm);document.removeEventListener('mousemove',nn);this.removeEventListener('blur',oo);ee(cc(this));};document.addEventListener('keydown',ll);document.addEventListener('keyup',mm);document.addEventListener('mousemove',nn);this.addEventListener('blur',oo);if(!this.getAttribute('data-original-content')){this.setAttribute('data-original-content',this.innerHTML);}dd(cc(this));};var a1=aa(document);var a2=document.getElementById('textolite-block').innerHTML;for(var a3=0,a4=a1.length;a3<a4;a3++){var a5=document.createElement('span');a5.innerHTML=a2;a5=a1[a3].parentNode.insertBefore(a5.firstElementChild,a1[a3]);a5.innerHTML=a1[a3].textContent.replace(new RegExp('&(#?[a-z0-9]{1,8};)','gi'),'&amp;$1');a1[a3].parentNode.removeChild(a1[a3]);a5.addEventListener('click',gg);a5.addEventListener('focus',hh);};if(document.documentElement.id!='textolite-error'){m.addEventListener('click',function(){if(o.disabled){w();}else w(ff());});m.className='textolite-active';};o.addEventListener('click',function(){v(ff());});};var u=function(){var aa=document.querySelector('pre');var cc=document.getElementById('textolite-source');var ol=document.querySelector('ol');var li=ol.getAttribute('data-item');var dd=function(ii){ii=ii.split('<.script').join('</script');ii=ii.split('&').join('&amp;');ii=ii.split('<').join('&lt;');ii=ii.split('>').join('&gt;');ii=ii.split('\n').join('<br>');ii=ii.replace(new RegExp('&lt;.*?&gt;','gi'),function(jj){if(jj.indexOf('<br>')!=-1){jj=jj.replace(new RegExp('<br>(.*?)(?=<br>|$)','gi'),'<br><span>$1</span>');return jj.replace(new RegExp('^(.*?)(?=<br>)','gi'),'<span>$1</span>');}else return '<span>'+jj+'</span>';});ii=ii.replace(new RegExp('(&amp;#?[a-z0-9]{2,7};)','gi'),'<span>$1</span>');ii=ii.replace(new RegExp('(.*?(<br>|$))','gi'),'<div>$1</div>');if(window.opera){ii=ii.split('<div>{caret}<br></div>').join('<div>{caret}<hr></div>');}return ii;};var ee=function(ii){if(window.opera){ii=ii.split('<hr>').join('\n');}ii=ii.replace(new RegExp('([^>]</span>|[^>])</div>','gi'),'$1<br></div>');ii=ii.split('<br>').join('\n');ii=ii.replace(new RegExp('<.*?>','gi'),'');ii=ii.split('&lt;').join('<');ii=ii.split('&gt;').join('>');ii=ii.split('&amp;').join('&');ii=ii.split('</script').join('<.script');return ii;};var gg=function(){var fd='';var fs=0;var fa=aa.getElementsByTagName('div');var fg=fa.length-1;var fh=setInterval(function(){for(var fj=fs+200;fs<fj;fs++){if(fs<fg){fd+=li.replace('0',fa[fs].clientHeight);}else{clearInterval(fh);ol.innerHTML=fd;break;}}},0);};var bb=function(){if(aa.getAttribute('data-original-content')!==aa.innerHTML){if(r.innerHTML==r.getAttribute('data-saved')){f(r);};o.disabled=false;}else o.disabled=true;if (aa.getAttribute('data-last-input')!=aa.innerHTML){var f44=window.getSelection();var d44=f44.getRangeAt(0);var s44=document.createTextNode('{caret}');if(aa==document.activeElement){d44.insertNode(s44);}s44=dd(ee(aa.innerHTML)).replace('{caret}', '<var>1</var> ');aa.innerHTML=s44;s44=aa.getElementsByTagName('var');if(s44.length){var a44=s44[0].nextSibling;d44=document.createRange();d44.setStart(a44,0);d44.setEnd(a44,0);d44.collapse(true);f44.removeAllRanges();a44.textContent=a44.textContent.slice(1);s44[0].parentNode.removeChild(s44[0]);f44.addRange(d44);}aa.setAttribute('data-last-input',aa.innerHTML);gg();}};var ff=function(){var aa=document.querySelector('pre');return ee(aa.innerHTML);};var sk=function(){var f1=window.getSelection();var f2=f1.getRangeAt(0);var f3=document.createTextNode('\t');var f4=f1.anchorNode;if(f4.nodeType==3){f2.insertNode(f3);f4=f4.nextSibling;f2=document.createRange();f2.setStart(f4,1);f2.setEnd(f4,1);f1.removeAllRanges();f1.addRange(f2);}};var hh=function(){var ii=function(e){if(e.keyCode==9){sk();}if(ii.i){clearTimeout(ii.i);}ii.i=setTimeout(function(){bb();},500);};var le=function(e){if(e.keyCode==9){e.preventDefault();}};var jj=function(){bb();document.removeEventListener('mousemove',jj);setTimeout(function(){if(document.activeElement==aa){document.addEventListener('mousemove',jj);}},500);};var kk=function(){bb();document.removeEventListener('keyup',ii);document.removeEventListener('keydown',le);document.removeEventListener('mousemove',jj);aa.removeEventListener('blur',kk);};document.addEventListener('keyup',ii);document.addEventListener('keydown',le);document.addEventListener('mousemove',jj);aa.addEventListener('blur',kk);if(o.disabled){var ll=aa.innerHTML;aa.setAttribute('data-original-content',ll);aa.setAttribute('data-last-input',ll);}};var ft = function(){gg();};window.addEventListener('resize', ft);aa.addEventListener('focus',hh);aa.innerHTML=dd(cc.innerHTML);gg();n.addEventListener('click',function(){if(o.disabled){w();}else w(ff());});n.className='textolite-active';o.addEventListener('click',function(){v(ff());});};var v=function(bb){var aa=k();a('textolite_token',aa);r.innerHTML=r.getAttribute('data-saving');r.className='textolite-processing';e(r);o.disabled=true;y();j('save='+encodeURIComponent(bb)+'&token='+aa,function(){r.innerHTML=r.getAttribute('data-saved');r.className='textolite-success';if(p.value==p.getAttribute('data-confirm')){x();}},function(){o.disabled=false;o.focus();r.innerHTML=r.getAttribute('data-request-rejected');r.className='textolite-error';},function(){o.disabled=false;o.focus();r.innerHTML=r.getAttribute('data-no-response');r.className='textolite-error';});};var w=function(aa){var bb=document.createElement('form');var cc=document.createElement('input');cc.name='switch';if(document.documentElement.id=='textolite-editor'){cc.value=0;}else cc.value=1;bb.appendChild(cc);if(aa){var dd=document.createElement('textarea');var ee=document.createElement('input');dd.name='source';dd.value=aa;ee.name='token';ee.value=k();a('textolite_token',ee.value);bb.appendChild(ee);bb.appendChild(dd);}bb.method='post';bb.style.display='none';document.documentElement.appendChild(bb);bb.submit();};var x=function(){r.innerHTML=r.getAttribute('data-session-remove');r.className='textolite-processing';e(r);j('logout=1',function(){r.innerHTML=r.getAttribute('data-access-closed');r.className='textolite-success';location.href=location.href;},function(){r.innerHTML=r.getAttribute('data-request-rejected');r.className='textolite-error';},function(){r.innerHTML=r.getAttribute('data-no-response');r.className='textolite-error';});};var y=function(){var aa=document.createElement('input');aa.style.marginLeft='-2000px';l.appendChild(aa);aa.focus();l.removeChild(aa);};var z=function(){if(c('textolite_check')){var u7='version='+r.getAttribute('data-version');if(r.getAttribute('data-ip')!='127.0.0.1'){u7+='&site='+encodeURIComponent(location.href.replace('http://','').replace(new RegExp('/[^/]+.html?$','i'),''));}j(u7,function(z1){b('textolite_check');a('textolite_update',z1,3);m8(z1);},function(){},function(){},function(){},'http://textolite.ru/update/');}else{var bb=c('textolite_update');if(bb){m8(bb);}}};var m8=function(bb){bb=bb*1;if(bb>0){r.innerHTML='<a href="http://textolite.ru/download/">'+r.getAttribute('data-new-version')+' '+bb+'</a>';r.className='textolite-update';e(r);}else if(bb<0){a('textolite_update',bb);r.innerHTML='<a href="http://textolite.ru/download/">'+r.getAttribute('data-need-updade')+'</a>';r.className='textolite-locked';e(r);o.style.display='none';s[0].parentNode.parentNode.style.display='none';}};	if(document.documentElement.id=='textolite-editor'){u();}else t();for(var z2=0,length=s.length;z2<length;z2++){s[z2].className='textolite-link';}document.addEventListener('mousedown',function(event){var z3=event.target;var z4=z3.className;for(var z5=z3;z5;z5=z5.parentNode){if(z5.className=='textolite-menu'){return;}}for(var z6=0,z7=s.length;z6<z7;z6++){var z8=s[z6].nextElementSibling;z8.style.display='none';z8.className='';s[z6].className='textolite-link';};if(z4=='textolite-link'){var z9=z3.nextElementSibling;z9.style.display='block';z9.className='textolite-menu';z3.className='';}});p.addEventListener('click',function(){if(o.disabled||p.value==p.getAttribute('data-confirm')){x();}else{p.value=p.getAttribute('data-confirm');r.innerHTML=r.getAttribute('data-not-saved');r.className='textolite-attention';e(r);y();}});setInterval(function(){j('reload=1',function(){if(r.style.display=='block'&&(r.innerHTML==r.getAttribute('data-access-closed')||r.innerHTML==r.getAttribute('data-no-response'))){f(r);}},function(){r.innerHTML=r.getAttribute('data-access-closed');r.className='textolite-attention';e(r);},function(){r.innerHTML=r.getAttribute('data-no-response');r.className='textolite-attention';e(r);});},1000*60*10);p.disabled=false;if(r.getAttribute('data-is-edited')){o.disabled=false;}z();}});document.addEventListener('DOMContentLoaded',function(){var l=document.getElementById('textolite-panel');var m=document.getElementById('textolite-settings');if(l&&m){var n=l.querySelector('div>div+ol+ul+ul+p samp');var o=m.querySelector('input[type="button"]');var p=m.querySelectorAll('input[type="password"]');var r=function(){if(this.className){this.previousElementSibling.type='password';this.className='';this.title=n.getAttribute('data-show-password');}else{this.previousElementSibling.type='text';this.className='textolite-hidden';this.title=n.getAttribute('data-hide-password');}};var s=function(event){if(event.keyCode==13){this.removeEventListener('input',t);u();}else if(o.disabled){this.addEventListener('input',t);}};var t=function(){if(p[0].value.length>0&&p[1].value.length>0){o.disabled=false;}else o.disabled=true;};var u=function(){if(!o.disabled){p[0].focus();p[0].disabled=true;p[1].disabled=true;o.disabled=true;n.innerHTML=n.getAttribute('data-hash-сreating');n.className='textolite-processing';e(n);w(p[0].value,p[1].value,n.getAttribute('data-hash-depth'),200,v);}};var w=function(aa,bb,cc,dd,ee){var ff=0;var hh=i(i(aa).substring(0,22)+aa);var ii=setInterval(function(){for(var gg=ff+dd;ff<gg;ff++){if(ff<cc){hh=i(hh);}else{var jj=0;var kk=i(i(bb).substring(0,22)+bb);var ll=setInterval(function(){for(var mm=jj+dd;jj<mm;jj++){if(jj<cc){kk=i(kk);}else{ee(hh,kk);clearInterval(ll);break;}}},0);clearInterval(ii);break;}}},0);};var v=function(aa,bb){n.innerHTML=n.getAttribute('data-сhanging-password');j('password='+aa+'&change='+bb,function(){if(this.getResponseHeader('X-Password-Changed')){p[0].disabled=false;p[1].disabled=false;n.innerHTML=n.getAttribute('data-password-changed');n.className='textolite-success';}else if(this.getResponseHeader('X-Wrong-Password')){p[0].disabled=false;p[1].disabled=false;p[0].focus();n.innerHTML=n.getAttribute('data-wrong-password');n.className='textolite-error';}},function(){p[0].disabled=false;p[1].disabled=false;p[0].focus();n.innerHTML=n.getAttribute('data-request-rejected');n.className='textolite-error';},function(){p[0].disabled=false;p[1].disabled=false;p[0].focus();n.innerHTML=n.getAttribute('data-no-response');n.className='textolite-error';});};for(var x=0,y=p.length;x<y;x++){var a=p[x].nextElementSibling;a.title=n.getAttribute('data-show-password');a.addEventListener('mousedown',r);p[x].addEventListener('keydown',s);};o.addEventListener('click',u);}});document.addEventListener('DOMContentLoaded',function(){var l=document.getElementById('textolite-panel');var m=document.getElementById('textolite-files');if(l&&m){var n=l.querySelector('div>div+ol+ul+ul+p samp');var o=l.querySelector('div>div+ol+ul>li>a');var p=m.querySelector('li>ol');var r=p.firstElementChild.firstElementChild.getAttribute('data-url');var s=window.location.pathname.slice(r.length);s=r+s.slice(s.indexOf('/')+1);var t=function(ff){var gg=ff.nextElementSibling;var ii=ff.firstElementChild.firstElementChild;var hh=ii.getAttribute('data-url');var jj=function(){var kk=s.slice(hh.length).indexOf('/');if(kk !=-1){ii=ii.parentNode.parentNode.nextElementSibling.querySelector('[data-url="'+s.slice(0,kk+hh.length+1)+'"]');if(ii){t(ii.parentNode.parentNode);}}else{ii=ii.parentNode.parentNode.nextElementSibling.querySelector('[href="'+window.location.pathname+'"]');if(ii){ii.parentNode.className='textolite-disable';}}};if(gg.firstElementChild){if(window.getComputedStyle(gg)['display']=='none'){ii.callback=function(){ii.callback=function(){};jj();};setTimeout(function(){ v.call(ii)},0);}else jj();}else{ii.callback=function(){ii.callback=function(){ii.callback=function(){};jj();};v.call(ii);};u.call(ii);}};var u=function(){var o=this;var li=o.parentNode;var ol=li.parentNode;var ff=o.getAttribute('data-url');li.className='textolite-processing';j('open='+encodeURIComponent(ff),function(jj){var ul=ol.nextElementSibling;ul.innerHTML=jj;var gg=ul.querySelectorAll('li>ol');for(var hh=0,ii=gg.length;hh<ii;hh++){x(gg[hh],this.getResponseHeader('X-System-URL'),this.getResponseHeader('X-System-Folder'));};o.callback();},function(){li.className='';o.addEventListener('click',u);n.innerHTML=n.getAttribute('data-request-rejected');n.className='textolite-error';e(n);},function(){li.className='';o.addEventListener('click',u);n.innerHTML=n.getAttribute('data-no-response');n.className='textolite-error';e(n);});o.removeEventListener('click',u);};var v=function(){var o=this;var li=o.parentNode;var ul=li.parentNode.nextElementSibling;g(ul,function(){o.addEventListener('click',w);o.callback();});li.className='textolite-open';o.removeEventListener('click',v);};var w=function(){var o=this;var li=o.parentNode;var ul=li.parentNode.nextElementSibling;h(ul,function(){o.addEventListener('click',v);});li.className='';o.removeEventListener('click',w);};var x=function(ol,ii,jj){var li=ol.firstElementChild;var gg=li.nextElementSibling;var ff=gg.nextElementSibling;var hh=ol.lastElementChild.firstElementChild;var o=li.firstElementChild;z(ff);gg.innerHTML=y((gg.innerHTML)*1);if(ol.className=='textolite-folder'){if(parseInt(gg.innerHTML)==0){li.className='textolite-disable';}else{o.callback=function(){o.callback=function(){};v.call(o);};o.addEventListener('click',u);};if(ii&&o.getAttribute('data-url')==ii||jj){hh.className='textolite-disable';}else hh.addEventListener('click',bb);}else{if(jj){li.className='textolite-locked';hh.className='textolite-disable';}else{var kk=o.getAttribute('data-url');var ll=ol.parentNode.parentNode.previousElementSibling.firstElementChild.firstElementChild.getAttribute('data-url');if(kk.lastIndexOf('/')==ll.lastIndexOf('/')){o.setAttribute('target','_blank');};o.href=kk;hh.addEventListener('click',ee);}}};var y=function(ff){var kb=1024;var mb=1024*kb;var gb=1024*mb;var tb=1024*gb;if(ff<mb){return(ff/kb).toFixed(2)+' KB';}else if(ff<gb){return(ff/mb).toFixed(2)+' MB';}else if(ff<tb){return(ff/gb).toFixed(2)+' GB';}else return(ff/tb).toFixed(2)+' TB';};var z=function(ff){var gg=ff.innerHTML*1000;var hh=new Date(gg);var ii=new Date().getTime();var jj=24*60*60*1000;var kk=jj*7;if((ii-gg)<jj){ff.className='textolite-day';}else if((ii-gg)<kk){ff.className='textolite-week';}ff.innerHTML=aa(hh.getDate())+'.'+aa(hh.getMonth()+1)+'.'+((hh.getFullYear()+'').slice(2))+' '+aa(hh.getHours())+':'+aa(hh.getMinutes());};var aa=function(ff){return(ff<10)?'0'+ff :ff;};var bb=function(){if(window.FormData){var ff=this.nextElementSibling;if(!ff){var ff=document.createElement('form');var gg=document.createElement('input');ff.style.position='absolute';ff.style.marginLeft='-9999px';gg.type='file';gg.name='file[]';gg.multiple=true;ff.appendChild(gg);this.parentNode.appendChild(ff);gg.addEventListener('change',function(){var hh=n.getAttribute('data-post-max-size')*1;var jj=n.getAttribute('data-upload-max-filesize')*1;var ii=n.getAttribute('data-max-file-uploads')*1;var kk=gg.files;var ll=kk.length;if(ll<=ii){var mm=0;for(var nn=0;nn<ll;nn++){mm+=kk[nn]['size'];};if(mm<hh&&mm<jj){cc(ff);}else{if(hh>jj){n.innerHTML=n.getAttribute('data-file-upload-size')+'('+y(jj)+')';}else n.innerHTML=n.getAttribute('data-file-upload-size')+'('+y(hh)+')';n.className='textolite-attention';e(n);}}else{n.innerHTML=n.getAttribute('data-file-upload-count')+'('+ii+')';n.className='textolite-attention';e(n);}});gg.focus();gg.click();}else ff.firstElementChild.click();}else{n.innerHTML=n.getAttribute('data-old-browser');n.className='textolite-attention';e(n);}};var cc=function(ff){if(cc.busy){if(!cc.stack){cc.stack=[];}cc.stack.push(ff);}else{cc.busy=true;var gg=new FormData(ff);var hh=k();var jj=ff.parentNode.parentNode.firstElementChild.firstElementChild.getAttribute('data-url');var ii=n.getAttribute('data-file-upload');gg.append('upload',encodeURIComponent(jj));gg.append('token',hh);a('textolite_token',hh);j(gg,function(response){var ol=ff.parentNode.parentNode;var ul=ol.nextElementSibling;var li=ol.firstElementChild;var kk=li.nextElementSibling;var ll=document.createElement('div');ll.innerHTML=response;if(ll.firstElementChild&&ll.firstElementChild.tagName.toLowerCase()=='li'){if(ul.firstElementChild){var mm=false;while(mm=ll.firstElementChild){ul.appendChild(mm);x(mm.firstElementChild);}e(ul);}else{var o=li.firstElementChild;o.callback=function(){o.callback=function(){o.callback=function(){};};v.call(o);};u.call(o);li.className='';}kk.innerHTML=y((this.getResponseHeader('X-Folder-Size'))*1);cc.loaded=ff.size;dd(0);}else dd(2);},function(){dd(2);},function(){dd(1);},function(nn,oo){if(cc.stack){for(var pp in cc.stack){if(!cc.stack[pp].size){cc.stack[pp].size=0;var rr=cc.stack[pp].firstElementChild.files;for(var ss=0,tt=rr.length;ss<tt;ss++){cc.stack[pp].size+=rr[ss]['size'];}cc.total+=cc.stack[pp].size;}}};if(cc.total){if(n.innerHTML.indexOf('(')!=-1){n.innerHTML=ii+'('+((nn+cc.loaded)*100/cc.total).toFixed(1)+'%)';}}else{cc.loaded=0;cc.total=oo;ff.size=oo;n.innerHTML=ii+'(0%)';n.className='textolite-processing';e(n);}});}};var dd=function(ff){if(typeof cc.exception=='undefined'||cc.exception<ff){cc.exception=ff;}delete cc.busy;if(cc.stack&&cc.stack.length){cc(cc.stack.shift());}else{switch(cc.exception){case 0:{n.innerHTML=n.getAttribute('data-file-upload-complete');n.className='textolite-success';break;}case 1:{n.innerHTML=n.getAttribute('data-no-response');n.className='textolite-error';break;}case 2:{n.innerHTML=n.getAttribute('data-file-upload-error');n.className='textolite-error';break;}}delete cc.exception;delete cc.stack;delete cc.total;delete cc.loaded;}};var ee=function(){var ii=this.nextElementSibling;var ff=ii.nextElementSibling;var ol=this.parentNode.parentNode;var g6=function(){var li=ol.parentNode;var o=ol.firstElementChild.firstElementChild;var gg=o.getAttribute('data-url');var hh=k();a('textolite_token',hh);n.innerHTML=n.getAttribute('data-file-removal');n.className='textolite-processing';e(n);li.style.display='none';j('remove='+encodeURIComponent(gg)+'&token='+hh,function(){var ul=li.parentNode;var jj=ul.previousElementSibling.firstElementChild;var ii=jj.nextElementSibling;n.innerHTML=n.getAttribute('data-file-removed');n.className='textolite-success';li.parentNode.removeChild(li);if(o.parentNode.className=='textolite-disable'){location.href=location.href;}ii.innerHTML=y((this.getResponseHeader('X-Folder-Size'))*1);if(!ul.firstElementChild){jj.className='textolite-disable';jj.firstElementChild.removeEventListener('click',w);}},function(){n.innerHTML=n.getAttribute('data-file-remove-error');n.className='textolite-error';li.style.display='block';},function(){n.innerHTML=n.getAttribute('data-no-response');n.className='textolite-attention';li.style.display='block';});};ol.className+=' textolite-confirm';ff.addEventListener('click',function(){ii.removeEventListener('click',g6);ol.className=ol.className.replace(' textolite-confirm','');});ii.addEventListener('click',g6);};x(p);o.addEventListener('mousedown',function(){if(this.nextElementSibling.style.display!='block'){t(p);}});}});}());